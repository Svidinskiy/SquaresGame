# Squares Game

<img width="1743" height="798" alt="image" src="https://github.com/user-attachments/assets/e96e54c4-d96e-42fe-9c48-3d5e21ff255d" />

## Описание

**Squares Game** — это стратегическая игра на доске, где игроки по очереди размещают фишки (белые или чёрные), чтобы сформировать квадрат из четырёх фишек одного цвета.  

Игра поддерживает режимы:
- игрок против игрока (PVP),
- игрок против компьютера (PVC),
- компьютер против компьютера (CVC).

Проект включает:
- Консольную версию для игры в терминале.
- Веб-версию с интерактивным интерфейсом на **HTML/CSS/JavaScript**.
- AI для компьютерных игроков со стратегиями:
  - немедленный выигрыш,
  - блокировка противника,
  - создание двойных угроз,
  - стратегические ходы.
- Поддержка досок размером от **3x3 до 10x10**.

Игра реализована на **Java** с использованием **Spring Boot** для веб-части. Фронтенд интегрирован как статические ресурсы.

---

## Функции

- **Режимы игры**: PVP, PVC, CVC.
- **AI компьютерного игрока**: ищет немедленные выигрыши, блокирует угрозы, создаёт двойные угрозы, использует стратегическую оценку и случайные ходы с весами.
- **Проверка победы**: автоматическое определение квадратов (включая повёрнутые) и ничьей.
- **Интерфейс**: консольный с командами; веб с UI, историей ходов и модальными окнами.
- **API**: эндпоинт `/api/nextMove` для расчёта хода компьютера.

---

## Требования

- **Java 17+**
- **Gradle 8+**

---

## Установка

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/your-username/squares-game.git
   cd squares-game
   ```

2. Соберите проект:
   ```bash
   gradle build
   ```
   Это скомпилирует код, запустит тесты и создаст JAR-файл в  
   `build/libs/squares-game-1.0-SNAPSHOT.jar`.

---

## Запуск

### Консольная версия
Запустите приложение в консольном режиме:
```bash
gradle run
```

Или напрямую из JAR:
```bash
java -jar build/libs/squares-game-1.0-SNAPSHOT.jar
```

В консоли введите команды (см. раздел **Использование**).

---

### Веб-версия
Запустите Spring Boot сервер:
```bash
gradle bootRun
```

Откройте в браузере: [http://localhost:8080](http://localhost:8080).  

---

## Использование

### Консольная версия

После запуска введите команды:

- Начало новой игры:
  ```
  GAME N, TYPE1 C1, TYPE2 C2
  ```
  Где:
  - `N`: размер доски (>2, например, 5).
  - `TYPE1/TYPE2`: `user` (игрок) или `comp` (компьютер).
  - `C1/C2`: цвет (`W` — белые, `B` — чёрные).

  **Пример**:
  ```
  GAME 5, user W, comp B
  ```

- Сделать ход:
  ```
  MOVE X, Y
  ```
  Где `X` и `Y` — координаты (начиная с 0).

  **Пример**:
  ```
  MOVE 0, 1
  ```

- Другие команды:
  - `HELP` — показать справку.
  - `EXIT` — выйти.

Компьютер делает ходы автоматически, если выбран `comp`.

---

### Веб-версия

1. Выберите размер доски (3–10).  
2. Выберите режим: **PVP**, **PVC** или **CVC**.  
3. Нажмите **"Начать игру"**.  
4. В PVP/PVC кликайте по клеткам для ходов.  
5. В CVC игра проходит автоматически.  
6. Просматривайте историю ходов и статус.  

---

## API

**POST** `/api/nextMove`  

### Пример запроса:
```json
{
  "size": 3,
  "data": "...W.B...",  
  "nextPlayerColor": "w"
}
```

- `size`: размер доски  
- `data`: строка доски (`W` / `B` / `.`)  
- `nextPlayerColor`: `w` или `b`

### Пример ответа:
```json
{
  "x": 0,
  "y": 2,
  "status": "ok"
}
```

---

## Структура проекта

```
src/main/java/org/example/console/   # Консольный интерфейс (Main, CommandProcessor)
src/main/java/org/example/core/      # Ядро игры (SquaresGame, Player, SquaresBoard)
src/main/java/org/example/web/       # Веб-часть (Controller, DTOs, Application)
src/main/resources/static/           # Фронтенд (index.html, app.js, style.css)
src/test/java/                       # Тесты (SquaresGameTest)
build.gradle                         # Конфигурация Gradle
application.properties               # Настройки Spring (порт 8080)
```
